<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= content_for?(:title) ? yield(:title) : "Ohana Consulting" %></title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", type: "module", "data-turbo-track": "reload" %>
</head>

<body>
<!-- NAVBAR -->
<header class="navbar" style="background-color: #9EB371; padding: 1rem 2rem; color: white;">
  <nav style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
    <!-- Hamburger (for small screens) -->
    <button class="menu-toggle" onclick="toggleMenu()" style="font-size: 1.5rem; background: none; border: none; color: white; display: none;">
      â˜°
    </button>

    <div class="navbar-links" id="navbar-links" style="display: flex; gap: 1rem;">
      <%= link_to "About", root_path(anchor: "about") %>
      <%= link_to "Services", root_path(anchor: "services") %>
      <%= link_to "Clients", root_path(anchor: "clients") %>
      <%= link_to 'Contact', contacts_path %>
    </div>
  </nav>
</header>

<!-- MAIN CONTENT -->
<main style="max-width: 800px; margin: 0 auto;">
  <%= yield %>
</main>

<!-- FOOTER -->
<footer style="background-color: #9EB371; color: white; padding: 2rem; text-align: center;">
  <p>&copy; <%= Time.current.year %> Ohana Consulting. All rights reserved.</p>
  <p style="font-size: 0.8rem; color: #f0f0f0;">Created with care by Studio P Design</p>
  <p><%= link_to "Privacy Statement", privacy_path, style: "color: white; text-decoration: underline;" %></p>
</footer>

<div id="cookie-banner" style="position: fixed; bottom: 0; width: 100%; background-color: #E0D9D2; color: #333; padding: 1rem; text-align: center; z-index: 1000; box-shadow: 0 -2px 6px rgba(0,0,0,0.1); display: none;">
  <p style="margin: 0;">
    We use cookies to understand where our visitors come from. No personal data is collected.
    <button onclick="acceptCookies()" style="margin-left: 1rem; padding: 0.5rem 1rem; background-color: #9EB371; border: none; color: white; border-radius: 4px; cursor: pointer;">
      Accept
    </button>
    <button onclick="declineCookies()" style="margin-left: 0.5rem; padding: 0.5rem 1rem; background-color: #767771; border: none; color: white; border-radius: 4px; cursor: pointer;">
      Decline
    </button>
  </p>
</div>

<!-- Smooth Scroll & Mobile Menu Script -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute("href"));
                if (target) {
                    target.scrollIntoView({ behavior: "smooth" });
                }

                const nav = document.getElementById("navbar-links");
                if (nav && nav.classList.contains("show")) {
                    nav.classList.remove("show");
                }
            });
        });

        // Mobile menu toggle
        window.toggleMenu = function () {
            const nav = document.getElementById("navbar-links");
            nav.classList.toggle("show");
        };

        // Cookie banner logic
        const consent = sessionStorage.getItem('cookieConsent');
        if (!consent) {
            document.getElementById('cookie-banner').style.display = 'block';
        } else if (consent === 'accepted') {
            // Optional: tracking logic
        }
    });

    function acceptCookies() {
        sessionStorage.setItem('cookieConsent', 'accepted');
        document.getElementById('cookie-banner').style.display = 'none';
        // Optional: enable tracking here
    }

    function declineCookies() {
        sessionStorage.setItem('cookieConsent', 'declined');
        document.getElementById('cookie-banner').style.display = 'none';
        // Optional: disable tracking here
    }
</script>
</body>
</html>
